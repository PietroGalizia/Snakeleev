<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snakeleev</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #002F5F;
            color: white;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Contenitore generale */
        #setupScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            text-align: center;
        }

        /* Stili per i pulsanti */
        .button {
            margin: 10px;
            padding: 10px 20px;
            background-color: #96AE21;
            border: none;
            color: white;
            cursor: pointer;
        }

        .button:hover {
            background-color: #739A1A;
            transition: background-color 0.3s;
        }

        /* Stili per la selezione della dieta */
        #dietSelection {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        /* Istruzioni */
        #instructions {
            margin-top: 20px;
            text-align: left;
            width: 80%;
        }

        #instructions h3 {
            text-align: center;
            font-size: 20px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        /* Canvas del gioco */
        #gameCanvas {
            display: none;
            background-color: #002F5F;
            margin: 0 auto;
            max-width: 90%;
            max-height: 90%;
        }
    </style>
</head>
<body>

    <h1>Snakeleev</h1>

    <!-- Contenitore per la selezione di velocità, range ed elementi -->
    <div id="setupScreen">
        <h2>Choose the Snake's settings</h2>

        <!-- Selezione velocità -->
        <div>
            <h3>Choose the Snake's speed</h3>
            <div id="speedButtons"></div>
        </div>

        <!-- Selezione range elementi -->
        <div>
            <h3>Choose the range of elements</h3>
            <label for="elementRange">Maximum atomic number (Z):</label>
            <input id="elementRange" type="range" min="1" max="118" value="40" oninput="updateElementCount()">
            <p id="selectedElementCount">1 ≤ Z ≤ 40</p>
        </div>

        <!-- Selezione dieta -->
        <div id="dietSelection" style="display: none;">
            <h3>Select the Snake's Diet</h3>
            <select id="dietDropdown"></select>
            <button class="button" onclick="finalSelection()">Play</button>
        </div>

        <!-- Istruzioni -->
        <div id="instructions">
            <h3>Instructions</h3>
            <ol>
                <li>Control the snake using the arrow keys or W, A, S, and D.</li>
                <li id="eat-instruction">Eat only the elements that match the selected diet.</li>
                <li>Press the spacebar to swap the positions of the two elements.</li>
                <li>Press "P" to pause or resume the game.</li>
                <li>Refresh the page to start a new game.</li>
            </ol>
            <h3>Scoring System</h3>
            <p>Your score increases when you eat an element that belongs to the selected diet.</p>
            <p>Eating an element outside the diet does not increase the score but still adds to the total elements eaten.</p>
            <p>Score Display: <b>Score / Total Elements Eaten</b></p>
        </div>
    </div>

    <!-- Canvas del gioco -->
    <div id="selectedDietText" style="display: none;"></div>
    <div id="scoreBoard" style="display: none;"></div>
    <canvas id="gameCanvas"></canvas>

    <script>
        // Impostazioni di velocità
        const SPEED_LEVELS = [250, 200, 150, 125, 100];
        let maxElementsToUse = 40;

        // Mostra i pulsanti di velocità
        document.addEventListener('DOMContentLoaded', () => {
            const speedButtons = document.getElementById('speedButtons');
            SPEED_LEVELS.forEach((speed, index) => {
                const button = document.createElement('button');
                button.className = 'button';
                button.innerText = `Level ${index + 1}`;
                button.onclick = () => selectSpeed(speed);
                speedButtons.appendChild(button);
            });
        });

        // Funzione per selezionare la velocità
        function selectSpeed(speed) {
            window.SPEED = speed;
            document.getElementById('dietSelection').style.display = 'block';
        }

        // Aggiorna il conteggio del range di elementi
        function updateElementCount() {
            const rangeValue = document.getElementById('elementRange').value;
            maxElementsToUse = parseInt(rangeValue);
            document.getElementById('selectedElementCount').textContent = `1 ≤ Z ≤ ${maxElementsToUse}`;
        }

        // Popola il dropdown della dieta
        function populateDietSelection() {
            const dietDropdown = document.getElementById("dietDropdown");
            const diets = [
                "Critical elements", "Elements of a smartphone", "Elements of life", "Elements of DNA", 
                "Radioactive elements (U-Th decay series)", "Elements essential for man", 
                "Elements used in therapy", "Elements used in diagnosis", "Medical radioisotopes",
                "Elements considered safety (grades A-E) in the first wall of fusion power plan",
                "Potentially toxic trace elements (PTEs)", "Toxic trace elements in dried mushrooms",
                "Elements dedicated to scientists", "Elements with names of latin derivation",
                "Elements with names of greek derivation", "Elements named after geographical locations and celestial bodies",
                "Elements with names not derived from latin or greek, nor from cities or countries",
                "Elements known since antiquity", "Elementary substances in solid state at standard temperature and pressure",
                "Elementary substances in liquid state at standard temperature and pressure",
                "Elementary substances in gas state at standard temperature and pressure", 
                "Ferromagnetic elements", "Ultra-high temperature metals", "Metals", "Nonmetals",
                "Elements of group I (Hydrogen & alkali metals)", "Elements of group II (Alkaline earth metals)", 
                "Elements of group XV (Pnictogens)", "Elements of group XVI (Chalcogens)", "Elements of group XVII (Halogens)",
                "Elements of group XVIII (Noble gases)", "Lanthanides", "Actinides", "Transition metals", 
                "Post-transition metals", "Metalloids", "Reactive nonmetals", "s-block elements", 
                "p-block elements", "d-block elements", "f-block elements"
            ];

            diets.forEach(diet => {
                const option = document.createElement("option");
                option.value = diet;
                option.textContent = diet;
                dietDropdown.appendChild(option);
            });
        }

        // Finalizza la selezione e avvia il gioco
        function finalSelection() {
            selectedDiet = document.getElementById("dietDropdown").value;
            document.getElementById('setupScreen').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('scoreBoard').style.display = 'block';
            startNewGame();
        }

        populateDietSelection();
    </script>
    <script src="Snakeleev.js"></script>
</body>
</html>
