<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snakeleev</title>
    <style>
        html,
         body {
            height: 100%;
            margin: 0;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #002F5F;
            color: white;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        #logo-container {
            position: absolute; /* Rende il posizionamento relativo al bordo della finestra */
            top: 20px;
            left: 10px;
            cursor: pointer;
        }
        #logo {
            width: 300px;
            height: auto;
        }

        /* Aggiungi spazio sotto il logo */
        #content {
            display: flex;
            flex-direction: column;
            align-items: center; /* Centra orizzontalmente */
            justify-content: flex-start; /* Non separa troppo gli elementi */
            text-align: center;
            padding-top: 20px;
            width: 100%;
            margin-top: 50px
        }

       h1 {
            font-size: 3rem;
            margin: 10px;
        }

        #dietSelection {
            text-align: center;
            margin-bottom: 10px; 
        }

        #dietSelection {
            display: none;
            text-align: center;
            margin: 18px 0;
        }
        
        .button {
            margin: 10px;
            padding: 10px 20px;
            background-color: #96AE21;
            border: none;
            color: white;
            cursor: pointer;
        }

        .button:hover {
            background-color: #739A1A;
            transition: background-color 0.3s;
        }

        #instructions {
            margin: 40px auto;
            text-align: left;
            width: 80%;
            color: white;
        }
        #instructions h3 {
            text-align: center;
            text-transform: uppercase;
            font-size: 20px;
            margin-bottom: 10px;
        }
        #instructions ol {
            padding-left: 20px;
        }
        #instructions h4:last-of-type {
            text-align: center;
            text-transform: uppercase;
            font-size: 20px;
            margin-bottom: 10px;
            color: rgb(229, 26, 75); /* Rosso specifico */
        }

        #citation {
            margin: 10px auto;
            font-size: 14px;
            text-align: center;
            color: white;
            padding: 5px;
        }
        
        #citation a {
            text-decoration: none;
            color: #96AE21;
        }
        #citation a:hover {
            color: #e51a4b;
        }

        #gameCanvas {
            display: none;
            background-color: #002F5F;
            margin: 10px auto;
            max-width: 90%;
            max-height: 90%;
        }

    </style>
</head>
<body>
    <div id="logo-container" onclick="window.open('https://www.issmc.cnr.it/en/', '_blank')">
        <img id="logo" src="logo.png" alt="Logo Istituto">
    </div>
    
    <div id="content">
        <h1>Snakeleev</h1>

    <!-- Schermata iniziale: scelta della velocità -->
    <div id="startScreen">
        <h2>Choose the Snake's speed</h2>
        <div id="speedButtons"></div>
    </div>

    <!-- Schermata per scegliere il numero di elementi -->
    <div id="elementSelection" style="display: none;">
        <h2>Select the biggest atomic number, <b>Z</b></h2>
        <label for="elementRange">1 ≤ <b>Z</b> ≤ 118 </label>
        <input id="elementRange" type="range" min="1" max="118" value="50" oninput="updateElementCount()">
        <p id="selectedElementCount">Selected: 50</p>
        <button class="button" onclick="proceedToDietSelection()()">Next</button>
     </div>

    <!-- Selezione della dieta -->
    <div id="dietSelection">
        <h2>Select the Snake's Diet</h2>
        <select id="dietDropdown"></select>
        <button class="button" onclick="finalSelection()">Play</button>
        <div id="instructions">
            <h3>INSTRUCTIONS</h3>
            <ol>
                <li>Move the snake using the arrow keys or the W, A, S, D keys.</li>
                <li id="eat-instruction">Eat the elements that belong to the selected diet.</li>
                <li>Skip the elements that don’t belong to the diet by pressing the spacebar.</li>
                <li>Refresh the page if you want to start a new game.</li>
        <h4>Stay Hungry! Stay Periodic!</h4>
            </ol>
        </div>
    </div>

    <!-- Canvas del gioco -->
    <div id="scoreBoard"></div>
    <canvas id="gameCanvas"></canvas>

    <!-- Game Over -->
    <div id="gameover style="display: none;" >
        <h2>Stay Hungry! Stay Periodic!</h2>
        <h3>Elements and Their Interesting Facts</h3>
        <ol>
            Coming soon...
        </ol>
        <button class="button" onclick="finalSelection()">New Game</button>
    </div>

    <!-- Citazione -->
    <div id="citation">
        <a href="https://zenodo.org/records/10643098" target="_blank">
            Pietro Galizia <i>"Snakeleev: The Snake videogame for Exploring the Periodic Table of Elements with Real-World Contexts"</i> 
            <br>J. Chem. Educ. <b>2025</b>, Vol., n., DOI: 10.1021/acs.jchemed.
        </a>
    </div>

    <script>
        // Setup degli elementi principali
        const SPEED_LEVELS = [250, 200, 150, 100, 50];
        let maxElementsToUse = 50;

        // Mostra la schermata iniziale
        document.addEventListener('DOMContentLoaded', () => {
            const speedButtons = document.getElementById('speedButtons');
            SPEED_LEVELS.forEach((speed, index) => {
                const button = document.createElement('button');
                button.className = 'button';
                button.innerText = `Level ${index + 1}`;
                button.onclick = () => selectSpeed(speed);
                speedButtons.appendChild(button);
            });
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('gameover').style.display = 'none';
            document.getElementById('elementSelection').style.display = 'none';
            document.getElementById('dietSelection').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'none';
            document.getElementById('scoreBoard').style.display = 'none';
        });

        // Funzione per selezionare la velocità e passare alla selezione della dieta
        function selectSpeed(speed) {
            window.SPEED = speed;
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('elementSelection').style.display = 'block';
            updateElementCount();
        }

        function updateElementCount() {
            const rangeValue = document.getElementById('elementRange').value;
            maxElementsToUse = parseInt(rangeValue);
            document.getElementById('selectedElementCount').textContent = `Selected: 1 ≤ Z ≤ ${maxElementsToUse}`;
        }

        function proceedToDietSelection() {
                document.getElementById('startScreen').style.display = 'none';
                document.getElementById('elementSelection').style.display = 'none';
                document.getElementById('dietSelection').style.display = 'block';

            const dietDropdown = document.getElementById("dietDropdown");
            const diets = [
                "Elements of a smartphone", "Elements of life", "Critical raw elements", "Elements of DNA", "Radioactive elements (U-Th decay series)",
                "Elements considered safety (grades A-E) in the first wall of fusion power plan",
                "Elements dedicated to scientists", "Elements with names of latin derivation",
                "Elements with names of greek derivation",
                "Elements with names derived from cities, countries, or elsewhere",
                "Elements with names not derived from latin or greek, nor from cities or countries",
                "Elements in solid state at standard temperature and pressure",
                "Elements in liquid state at standard temperature and pressure",
                "Elements in gas state at standard temperature and pressure", "Metals", "Nonmetals",
                "Elements of group I (Hydrogen & alkali metals)",
                "Elements of group II (Alkaline earth metals)", "elements of group XV (Pnictogens)",
                "Elements of group XVI (Chalcogens)", "elements of group XVII (Halogens)",
                "Elements of group XVIII (Noblegases)", "Lanthanides", "Actinides",
                "Transition metals", "Post-transition metals", "Metalloids", "Reactive nonmetals",
                "s-block elements", "p-block elements", "d-block elements", "f-block elemnts"
            ]; 
            
            // Aggiungi altre opzioni
            diets.forEach(diet => {
                const option = document.createElement("option");
                option.value = diet;
                option.textContent = diet;
                dietDropdown.appendChild(option);
            });
        }

        function finalSelection() {
            selectedDiet = document.getElementById("dietDropdown").value;
            window.selectedDiet = document.getElementById("dietDropdown").value;
            document.getElementById('dietSelection').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('scoreBoard').style.display = 'block';
            startNewGame();
        }


        // Funzione per avviare il gioco
        function startNewGame() {
            document.getElementById('dietSelection').style.display = 'none'; // Nascondi la schermata
            document.getElementById('gameCanvas').style.display = 'block'; // Mostra il canvas del gioco
            startGame(); // Funzione definita in Snakeleev.js
        }
    </script>
    <script src="Snakeleev.js"></script>
</body>
</html>
