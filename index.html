<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snakeleev</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #002F5F;
            color: white;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding-top: 20px;
            width: 100%;
            margin-top: 50px;
        }

        h1 {
            font-size: 3rem;
            margin: 20px;
        }

        .selection-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .selection-container h2 {
            margin-bottom: 10px;
        }

        .button {
            margin: 10px;
            padding: 10px 20px;
            background-color: #96AE21;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }

        .button:hover {
            background-color: #739A1A;
            transition: background-color 0.3s;
        }

        select, input {
            padding: 5px;
            margin-top: 5px;
        }

        #instructions {
            margin: 40px auto;
            text-align: left;
            width: 80%;
            color: white;
        }

        #gameCanvas {
            display: none;
            background-color: #002F5F;
            margin: 0 auto;
            max-width: 90%;
            max-height: 90%;
        }

        #scoreBoard {
            display: none;
            margin-top: 15px;
        }
    </style>
</head>
<body>

    <h1 id="title">Snakeleev</h1>

    <div class="selection-container" id="gameSetup">
        <h2>Choose Settings</h2>

        <label for="speed">Snake Speed:</label>
        <select id="speed">
            <option value="250">Level 1 (Slow)</option>
            <option value="200">Level 2</option>
            <option value="150">Level 3 (Medium)</option>
            <option value="125">Level 4</option>
            <option value="100">Level 5 (Fast)</option>
        </select>

        <br><br>

        <label for="elementRange">Maximum Atomic Number (Z):</label>
        <input id="elementRange" type="range" min="1" max="118" value="40" oninput="updateElementCount()">
        <p id="selectedElementCount"> 1 ≤ Z ≤ 40</p>

        <br>

        <label for="dietDropdown">Select Diet:</label>
        <select id="dietDropdown"></select>

        <br><br>
        <button class="button" onclick="startGame()">Play</button>
    </div>

    <div id="scoreBoard"></div>
    <canvas id="gameCanvas"></canvas>

    <div id="instructions">
        <h3>INSTRUCTIONS</h3>
        <ol>
            <li>Control the snake using the arrow keys or W, A, S, and D.</li>
            <li id="eat-instruction">Eat only the elements that match the selected diet.</li>
            <li>Press the spacebar to swap the positions of the two elements.</li>
            <li>Press "P" to pause or resume the game.</li>
            <li>Refresh the page to start a new game.</li>
        </ol>
        <h3>SCORING SYSTEM</h3>
        <p>
            Your score increases when you eat an element that belongs to the selected diet.
            Eating an element outside the diet does not increase the score but still adds to the total elements eaten.
        </p>
        <p>
            The score display shows:
            <br><b>Score / Total Elements Eaten (Percentage)</b>
        </p>
    </div>

    <script>
        // Carica la lista delle diete
        document.addEventListener('DOMContentLoaded', () => {
            const dietDropdown = document.getElementById("dietDropdown");
            const diets = [
                "Critical elements", "Elements of a smartphone", "Elements of life",
                "Elements of DNA", "Radioactive elements (U-Th decay series)",
                "Elements essential for man", "Elements used in therapy",
                "Medical radioisotopes", "Elements considered safety (grades A-E)",
                "Toxic trace elements in dried mushrooms", "Elements dedicated to scientists",
                "Ferromagnetic elements", "Ultra-high temperature metals",
                "Metals", "Nonmetals", "Transition metals",
                "Lanthanides", "Actinides", "s-block elements",
                "p-block elements", "d-block elements", "f-block elements"
            ];
            diets.forEach(diet => {
                const option = document.createElement("option");
                option.value = diet;
                option.textContent = diet;
                dietDropdown.appendChild(option);
            });

            // Imposta il valore iniziale del range
            updateElementCount();
        });

        function updateElementCount() {
            const rangeValue = document.getElementById('elementRange').value;
            document.getElementById('selectedElementCount').textContent = `1 ≤ Z ≤ ${rangeValue}`;
        }

        function startGame() {
            // Ottieni le impostazioni selezionate
            window.SPEED = parseInt(document.getElementById('speed').value);
            window.maxElementsToUse = parseInt(document.getElementById('elementRange').value);
            window.selectedDiet = document.getElementById('dietDropdown').value;

            // Nasconde il setup iniziale e avvia il gioco
            document.getElementById('gameSetup').style.display = 'none';
            document.getElementById('instructions').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('scoreBoard').style.display = 'block';

            startNewGame(); // Avvia il gioco
        }
    </script>

</body>
</html>
